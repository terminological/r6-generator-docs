<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R6 Generator Maven Plugin: Getting started • testRapi</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="R6 Generator Maven Plugin: Getting started">
<meta property="og:description" content="testRapi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">testRapi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/testRapi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/R6-generator-datatypes.html">R6 Generator Maven Plugin: Datatype conversion</a>
    </li>
    <li>
      <a href="../articles/R6-generator-features.html">R6 Generator Maven Plugin: Key features</a>
    </li>
    <li>
      <a href="../articles/R6-generator-maven-config.html">R6 Generator Maven Plugin: Metadata and Maven configuration</a>
    </li>
    <li>
      <a href="../articles/R6-generator-runtime.html">R6 Generator Runtime: Using R Datatypes in Java</a>
    </li>
    <li>
      <a href="../articles/web-only/R6-generator-maven-archetype.html">R6 Generator Maven Archetype: Recommended project setup</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="testRapi_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>R6 Generator Maven Plugin: Getting started</h1>
                        <h4 class="author">Rob Challen</h4>
            
      
      
      <div class="hidden name"><code>testRapi.Rmd</code></div>

    </div>

    
    
<p>Maven plugin and annotation processor to write glue code to allow correctly annotated java class to be used within R as an set of R6 classes.</p>
<div id="rationale" class="section level2">
<h2 class="hasAnchor">
<a href="#rationale" class="anchor"></a>Rationale</h2>
<p>R can use RJava or jsr223 to communicate with java. R has a class system called R6.</p>
<p>If you want to use a java library in R there is potentially a lot of glue code needed, and R library specific packaging configuration required.</p>
<p>However if you don’t mind writing an R-centric API in Java you can generate all of this glue code using a few java annotations and the normal javadoc annotations. This plugin aims to provide an annotation processor that writes that glue code and creates a fairly transparent connection between java code and R code, with a minimum of hard work. The focus of this is streamlining the creation of R libraries by Java developers, rather than allowing access to arbitrary Java code from R.</p>
<p>The ultimate aim of this plugin to allow java developers to provide simple APIs for their libraries, package their library using maven, push it to github and for that to become seamlessly available as an R library, with a minimal amount of fuss.</p>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h2>
<div id="write-a-java-api" class="section level3">
<h3 class="hasAnchor">
<a href="#write-a-java-api" class="anchor"></a>Write a java api:</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">import</span><span class="im"> org.slf4j.Logger;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">import</span><span class="im"> org.slf4j.LoggerFactory;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">import</span><span class="im"> uk.co.terminological.rjava.RClass;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">import</span><span class="im"> uk.co.terminological.rjava.RMethod;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="kw">import</span><span class="im"> uk.co.terminological.rjava.types.RDataframe;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">/**</span></span>
<span id="cb1-9"><a href="#cb1-9"></a> <span class="co">*</span> This class is a very basic example of the features of the rJava maven plugin<span class="co">. </span><span class="kw">&lt;br&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10"></a> <span class="co">*</span> The class is annotated with an <span class="co">@</span>RClass to identify it as part of the R API<span class="co">.</span> <span class="kw">&lt;br&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11"></a> <span class="co">*/</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="at">@RClass</span>(</span>
<span id="cb1-13"><a href="#cb1-13"></a>    exampleSetup = {</span>
<span id="cb1-14"><a href="#cb1-14"></a>        <span class="st">"J = JavaApi$get()"</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>    },</span>
<span id="cb1-16"><a href="#cb1-16"></a>    testSetup = {</span>
<span id="cb1-17"><a href="#cb1-17"></a>        <span class="st">"J = JavaApi$get()"</span>,</span>
<span id="cb1-18"><a href="#cb1-18"></a>    }</span>
<span id="cb1-19"><a href="#cb1-19"></a>)</span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="kw">public</span> <span class="kw">class</span> MinimalExample {</span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a>    <span class="dt">static</span> <span class="bu">Logger</span> log = LoggerFactory.<span class="fu">getLogger</span>(MinimalExample.<span class="fu">class</span>);</span>
<span id="cb1-23"><a href="#cb1-23"></a>    </span>
<span id="cb1-24"><a href="#cb1-24"></a>    <span class="at">@RMethod</span>(examples = {</span>
<span id="cb1-25"><a href="#cb1-25"></a>        <span class="st">"minExample = J$MinimalExample$new()"</span>,</span>
<span id="cb1-26"><a href="#cb1-26"></a>        <span class="st">"minExample$demo(dataframe=tibble::tibble(input=c(1,2,3)), message='Hello world')"</span></span>
<span id="cb1-27"><a href="#cb1-27"></a>    })</span>
<span id="cb1-28"><a href="#cb1-28"></a>    <span class="co">/**</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>     <span class="co">*</span> Documentation of the method can be done in JavaDoc and these will be present in the R documentation </span>
<span id="cb1-30"><a href="#cb1-30"></a>     <span class="co">* </span><span class="an">@param dataframe </span><span class="co">-</span> a dataframe with an arbitrary number of columns</span>
<span id="cb1-31"><a href="#cb1-31"></a>     <span class="co">*</span> <span class="an">@param message </span><span class="co">-</span> a message</span>
<span id="cb1-32"><a href="#cb1-32"></a>     <span class="co">*</span> <span class="an">@return </span>the dataframe unchanged</span>
<span id="cb1-33"><a href="#cb1-33"></a>     <span class="co">*</span>  </span>
<span id="cb1-34"><a href="#cb1-34"></a>     <span class="co">*/</span></span>
<span id="cb1-35"><a href="#cb1-35"></a>    <span class="kw">public</span> RDataframe <span class="fu">demo</span>(RDataframe dataframe, <span class="bu">String</span> message) {</span>
<span id="cb1-36"><a href="#cb1-36"></a>        log.<span class="fu">info</span>(<span class="st">"this dataframe has nrow="</span>+dataframe.<span class="fu">nrow</span>());</span>
<span id="cb1-37"><a href="#cb1-37"></a>        log.<span class="fu">info</span>(message);</span>
<span id="cb1-38"><a href="#cb1-38"></a>        <span class="kw">return</span> dataframe;</span>
<span id="cb1-39"><a href="#cb1-39"></a>    }</span>
<span id="cb1-40"><a href="#cb1-40"></a>    </span>
<span id="cb1-41"><a href="#cb1-41"></a>}</span></code></pre></div>
<p>Key points:</p>
<ul>
<li>You can annotate multiple classes with <span class="citation">@RClass</span>.</li>
<li>Only public methods annotated with <span class="citation">@RMethod</span> will feature in the R library</li>
<li>you cannot overload methods or constructors. Only one method with a given name is supported, and only one annotated constructor.</li>
<li>static and non static java methods are supported.</li>
<li>Objects that can be translated into R are returned by value</li>
<li>Other objects are passed around in R by reference as R6 Objects mirroring the layout of the java code.</li>
<li>Such objects can interact with each other in the same java api engine (see below)</li>
</ul>
</div>
<div id="package-it" class="section level3">
<h3 class="hasAnchor">
<a href="#package-it" class="anchor"></a>Package it:</h3>
<p>Required Maven runtime dependency</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1"></a>    <span class="kw">&lt;properties&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>        <span class="kw">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="kw">&lt;/project.build.sourceEncoding&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>        <span class="kw">&lt;maven.compiler.source&gt;</span>1.8<span class="kw">&lt;/maven.compiler.source&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>        <span class="kw">&lt;maven.compiler.target&gt;</span>1.8<span class="kw">&lt;/maven.compiler.target&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>        <span class="kw">&lt;r6.version&gt;</span>main-SNAPSHOT<span class="kw">&lt;/r6.version&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>    <span class="kw">&lt;/properties&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="kw">&lt;artifactId&gt;</span>r6-generator-docs<span class="kw">&lt;/artifactId&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="kw">&lt;version&gt;</span>main-SNAPSHOT<span class="kw">&lt;/version&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="kw">&lt;packaging&gt;</span>jar<span class="kw">&lt;/packaging&gt;</span></span>
<span id="cb2-12"><a href="#cb2-12"></a></span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="kw">&lt;name&gt;</span>R6 Generator Maven Plugin Test<span class="kw">&lt;/name&gt;</span></span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a>    <span class="kw">&lt;dependencies&gt;</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>        <span class="kw">&lt;dependency&gt;</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>            <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>            <span class="kw">&lt;artifactId&gt;</span>r6-generator-runtime<span class="kw">&lt;/artifactId&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>            <span class="kw">&lt;version&gt;</span>${r6.version}<span class="kw">&lt;/version&gt;</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>        <span class="kw">&lt;/dependency&gt;</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>...</span>
<span id="cb2-22"><a href="#cb2-22"></a>    <span class="kw">&lt;/dependencies&gt;</span></span></code></pre></div>
<p>Repository configuration if you want to use the unstable <code>main-SNAPSHOT</code> version of the <code>r6-generator</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb3-1"><a href="#cb3-1"></a>    <span class="co">&lt;!-- Resolve runtime library on sonatype OSSRH --&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="co">&lt;!-- not needed if you plan to use a stable r6.version of the r6-generator-runtime </span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">        and r6-generator-maven-plugin rather than main-SNAPSHOT --&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="kw">&lt;repositories&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>        <span class="kw">&lt;repository&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>            <span class="kw">&lt;id&gt;</span>Sonatype OSSRH<span class="kw">&lt;/id&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>            <span class="kw">&lt;url&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots/<span class="kw">&lt;/url&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>        <span class="kw">&lt;/repository&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>    <span class="kw">&lt;/repositories&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="co">&lt;!-- Resolve maven plugin on sonatype OSSRH --&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>    <span class="kw">&lt;pluginRepositories&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>        <span class="kw">&lt;pluginRepository&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>            <span class="kw">&lt;id&gt;</span>Sonatype OSSRH<span class="kw">&lt;/id&gt;</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>            <span class="kw">&lt;url&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots/<span class="kw">&lt;/url&gt;</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>        <span class="kw">&lt;/pluginRepository&gt;</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>    <span class="kw">&lt;/pluginRepositories&gt;</span></span></code></pre></div>
<p>Maven plugin example configuration:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1"></a>    <span class="kw">&lt;build&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>        <span class="kw">&lt;plugins&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>...</span>
<span id="cb4-4"><a href="#cb4-4"></a>            <span class="kw">&lt;plugin&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>                <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>                <span class="kw">&lt;artifactId&gt;</span>r6-generator-maven-plugin<span class="kw">&lt;/artifactId&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>                <span class="kw">&lt;version&gt;</span>${r6.version}<span class="kw">&lt;/version&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>                <span class="kw">&lt;configuration&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>                    <span class="kw">&lt;packageData&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>                        <span class="co">&lt;!-- R package metadata: --&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>                        <span class="kw">&lt;title&gt;</span>A test library<span class="kw">&lt;/title&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>                        </span>
<span id="cb4-13"><a href="#cb4-13"></a>                        <span class="co">&lt;!-- As this project is documenting the r6-generator-maven-plugin I am syncing R package version with the --&gt;</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>                        <span class="co">&lt;!-- r6-generator version. this is unlikely to be what you want to do. --&gt;</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>                        <span class="kw">&lt;version&gt;</span>${r6.version}<span class="kw">&lt;/version&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16"></a>                         </span>
<span id="cb4-17"><a href="#cb4-17"></a>                        <span class="co">&lt;!-- Instead you most likely want to sync the R package version to your Java artifact version in a "normal" project --&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>                        <span class="co">&lt;!-- &lt;version&gt;${version}&lt;/version&gt; --&gt;</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>                        <span class="co">&lt;!-- Alternatively you can manage the R package version manually by putting whatever you like in here --&gt;</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>                        <span class="co">&lt;!-- Although semantic versioning of the format 0.1.0.9000 is expected --&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21"></a>                        <span class="co">&lt;!-- &lt;version&gt;0.1.0.9000&lt;/version&gt; --&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>                        </span>
<span id="cb4-23"><a href="#cb4-23"></a>                        <span class="kw">&lt;url&gt;</span>https://terminological.github.io/r6-generator-docs/docs/<span class="kw">&lt;/url&gt;</span></span>
<span id="cb4-24"><a href="#cb4-24"></a>                        <span class="kw">&lt;doi&gt;</span>10.5281/zenodo.6645134<span class="kw">&lt;/doi&gt;</span></span>
<span id="cb4-25"><a href="#cb4-25"></a>                        <span class="kw">&lt;packageName&gt;</span>testRapi<span class="kw">&lt;/packageName&gt;</span></span>
<span id="cb4-26"><a href="#cb4-26"></a>                        <span class="kw">&lt;license&gt;</span>MIT<span class="kw">&lt;/license&gt;</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>                        </span>
<span id="cb4-28"><a href="#cb4-28"></a>                        <span class="co">&lt;!-- this is the Description field in the R DESCRIPTION file --&gt;</span></span>
<span id="cb4-29"><a href="#cb4-29"></a>                        <span class="co">&lt;!-- CRAN specifies some standards for this, such as it shoudl not start with the package name and must pass spellchecks --&gt;</span></span>
<span id="cb4-30"><a href="#cb4-30"></a>                        <span class="co">&lt;!-- any references to other packages mut be in single quotes --&gt;</span></span>
<span id="cb4-31"><a href="#cb4-31"></a>                        <span class="kw">&lt;description&gt;</span></span>
<span id="cb4-32"><a href="#cb4-32"></a>                            Documents the features of the 'r6-generator-maven-plugin' by providing an example</span>
<span id="cb4-33"><a href="#cb4-33"></a>                            of an R package automatically generated from Java code by the plugin. </span>
<span id="cb4-34"><a href="#cb4-34"></a>                            It is not intended to be useful beyond testing, demonstrating and documenting the features of the plugin.</span>
<span id="cb4-35"><a href="#cb4-35"></a>                        <span class="kw">&lt;/description&gt;</span></span>
<span id="cb4-36"><a href="#cb4-36"></a>                        <span class="kw">&lt;maintainerName&gt;</span>Rob<span class="kw">&lt;/maintainerName&gt;</span></span>
<span id="cb4-37"><a href="#cb4-37"></a>                        <span class="kw">&lt;maintainerFamilyName&gt;</span>Challen<span class="kw">&lt;/maintainerFamilyName&gt;</span></span>
<span id="cb4-38"><a href="#cb4-38"></a>                        <span class="kw">&lt;maintainerEmail&gt;</span>rc538@exeter.ac.uk<span class="kw">&lt;/maintainerEmail&gt;</span></span>
<span id="cb4-39"><a href="#cb4-39"></a>                        <span class="kw">&lt;maintainerOrganisation&gt;</span>University of Exeter<span class="kw">&lt;/maintainerOrganisation&gt;</span></span>
<span id="cb4-40"><a href="#cb4-40"></a>                        </span>
<span id="cb4-41"><a href="#cb4-41"></a>                        <span class="co">&lt;!-- Build configuration options: --&gt;</span></span>
<span id="cb4-42"><a href="#cb4-42"></a>                        <span class="kw">&lt;debug&gt;</span>false<span class="kw">&lt;/debug&gt;</span> <span class="co">&lt;!-- starts the R library with java code in debugging mode --&gt;</span></span>
<span id="cb4-43"><a href="#cb4-43"></a>                        <span class="kw">&lt;useRoxygen2&gt;</span>true<span class="kw">&lt;/useRoxygen2&gt;</span> <span class="co">&lt;!-- Roxygen can integrate user supplied and generated R code, but requires </span></span>
<span id="cb4-44"><a href="#cb4-44"></a><span class="co">                            a working R version on the system that generates the R package. </span></span>
<span id="cb4-45"><a href="#cb4-45"></a><span class="co">                            This must be set if, like this package, you define some additional manual functions in your own</span></span>
<span id="cb4-46"><a href="#cb4-46"></a><span class="co">                            `.R` files in the R directory beyond those generated by the package. This kind of hybrid java and R </span></span>
<span id="cb4-47"><a href="#cb4-47"></a><span class="co">                            package must use devtools::document through this option to generate the documentation.</span></span>
<span id="cb4-48"><a href="#cb4-48"></a><span class="co">                            --&gt;</span></span>
<span id="cb4-49"><a href="#cb4-49"></a>                        <span class="kw">&lt;usePkgdown&gt;</span>false<span class="kw">&lt;/usePkgdown&gt;</span> <span class="co">&lt;!-- Pkgdown will generate a nice looking site --&gt;</span></span>
<span id="cb4-50"><a href="#cb4-50"></a>                        <span class="kw">&lt;useJavadoc&gt;</span>false<span class="kw">&lt;/useJavadoc&gt;</span> <span class="co">&lt;!-- building the javadocs into the documentation is nice but can add </span></span>
<span id="cb4-51"><a href="#cb4-51"></a><span class="co">                            to the size of the package which is not helpful if submitting to CRAN --&gt;</span></span>
<span id="cb4-52"><a href="#cb4-52"></a>                            </span>
<span id="cb4-53"><a href="#cb4-53"></a>                        <span class="co">&lt;!-- pre-compiling the binary if probably a safer option --&gt;</span></span>
<span id="cb4-54"><a href="#cb4-54"></a>                        <span class="co">&lt;!-- the alternative is to fetch all dependencies and compile the java from source on first use of the library --&gt;</span></span>
<span id="cb4-55"><a href="#cb4-55"></a>                        <span class="kw">&lt;preCompileBinary&gt;</span>true<span class="kw">&lt;/preCompileBinary&gt;</span> </span>
<span id="cb4-56"><a href="#cb4-56"></a>                        </span>
<span id="cb4-57"><a href="#cb4-57"></a>                         <span class="co">&lt;!-- packaging all dependencies is the most robust but results in a large package size that may not be accepted on CRAN --&gt;</span></span>
<span id="cb4-58"><a href="#cb4-58"></a>                         <span class="co">&lt;!-- the alternative is to fetch all dependencies on first library use. --&gt;</span></span>
<span id="cb4-59"><a href="#cb4-59"></a>                         <span class="co">&lt;!-- this option only applies if the binary is precompiled in the previous option. --&gt;</span></span>
<span id="cb4-60"><a href="#cb4-60"></a>                        <span class="kw">&lt;packageAllDependencies&gt;</span>false<span class="kw">&lt;/packageAllDependencies&gt;</span></span>
<span id="cb4-61"><a href="#cb4-61"></a>                        </span>
<span id="cb4-62"><a href="#cb4-62"></a>                        <span class="co">&lt;!-- any rJava VM start up options can be added here --&gt;</span></span>
<span id="cb4-63"><a href="#cb4-63"></a>                        <span class="kw">&lt;rjavaOpts&gt;</span></span>
<span id="cb4-64"><a href="#cb4-64"></a>                            <span class="kw">&lt;rjavaOpt&gt;</span>-Xmx256M<span class="kw">&lt;/rjavaOpt&gt;</span> <span class="co">&lt;!-- this example sets the maximum heap size --&gt;</span></span>
<span id="cb4-65"><a href="#cb4-65"></a>                        <span class="kw">&lt;/rjavaOpts&gt;</span></span>
<span id="cb4-66"><a href="#cb4-66"></a>                        </span>
<span id="cb4-67"><a href="#cb4-67"></a>                    <span class="kw">&lt;/packageData&gt;</span></span>
<span id="cb4-68"><a href="#cb4-68"></a>                    <span class="co">&lt;!-- the best place to put the R package is in the directory above the java code --&gt;</span></span>
<span id="cb4-69"><a href="#cb4-69"></a>                    <span class="co">&lt;!-- and to have the java code in a `java` subdirectory of a github repo. --&gt;</span></span>
<span id="cb4-70"><a href="#cb4-70"></a>                    <span class="co">&lt;!-- i.e. this file would be `java/pom.xml`. This makes R optimally happy and is the best layout for new projects. --&gt;</span></span>
<span id="cb4-71"><a href="#cb4-71"></a>                    <span class="kw">&lt;outputDirectory&gt;</span>${project.basedir}/..<span class="kw">&lt;/outputDirectory&gt;</span></span>
<span id="cb4-72"><a href="#cb4-72"></a>                <span class="kw">&lt;/configuration&gt;</span></span>
<span id="cb4-73"><a href="#cb4-73"></a>                <span class="kw">&lt;executions&gt;</span></span>
<span id="cb4-74"><a href="#cb4-74"></a>                    <span class="kw">&lt;execution&gt;</span></span>
<span id="cb4-75"><a href="#cb4-75"></a>                        <span class="kw">&lt;id&gt;</span>clean-r-library<span class="kw">&lt;/id&gt;</span></span>
<span id="cb4-76"><a href="#cb4-76"></a>                        <span class="kw">&lt;goals&gt;</span></span>
<span id="cb4-77"><a href="#cb4-77"></a>                            <span class="kw">&lt;goal&gt;</span>clean-r-library<span class="kw">&lt;/goal&gt;</span></span>
<span id="cb4-78"><a href="#cb4-78"></a>                        <span class="kw">&lt;/goals&gt;</span></span>
<span id="cb4-79"><a href="#cb4-79"></a>                    <span class="kw">&lt;/execution&gt;</span></span>
<span id="cb4-80"><a href="#cb4-80"></a>                    <span class="kw">&lt;execution&gt;</span></span>
<span id="cb4-81"><a href="#cb4-81"></a>                        <span class="kw">&lt;id&gt;</span>flatten-pom<span class="kw">&lt;/id&gt;</span></span>
<span id="cb4-82"><a href="#cb4-82"></a>                        <span class="kw">&lt;goals&gt;</span></span>
<span id="cb4-83"><a href="#cb4-83"></a>                            <span class="kw">&lt;goal&gt;</span>flatten-pom<span class="kw">&lt;/goal&gt;</span></span>
<span id="cb4-84"><a href="#cb4-84"></a>                        <span class="kw">&lt;/goals&gt;</span></span>
<span id="cb4-85"><a href="#cb4-85"></a>                    <span class="kw">&lt;/execution&gt;</span></span>
<span id="cb4-86"><a href="#cb4-86"></a>                    <span class="kw">&lt;execution&gt;</span></span>
<span id="cb4-87"><a href="#cb4-87"></a>                        <span class="kw">&lt;id&gt;</span>generate-r-library<span class="kw">&lt;/id&gt;</span></span>
<span id="cb4-88"><a href="#cb4-88"></a>                        <span class="kw">&lt;goals&gt;</span></span>
<span id="cb4-89"><a href="#cb4-89"></a>                            <span class="kw">&lt;goal&gt;</span>generate-r-library<span class="kw">&lt;/goal&gt;</span></span>
<span id="cb4-90"><a href="#cb4-90"></a>                        <span class="kw">&lt;/goals&gt;</span></span>
<span id="cb4-91"><a href="#cb4-91"></a>                    <span class="kw">&lt;/execution&gt;</span></span>
<span id="cb4-92"><a href="#cb4-92"></a>                <span class="kw">&lt;/executions&gt;</span></span>
<span id="cb4-93"><a href="#cb4-93"></a>            <span class="kw">&lt;/plugin&gt;</span></span>
<span id="cb4-94"><a href="#cb4-94"></a>        <span class="kw">&lt;/plugins&gt;</span></span>
<span id="cb4-95"><a href="#cb4-95"></a>    <span class="kw">&lt;/build&gt;</span></span></code></pre></div>
<p>And with this in place, a call to mvn package or mvn install will create your R library by adding files to your java source tree in the directory. Push your java source tree to github (Optional).</p>
</div>
<div id="run-it-from-r" class="section level3">
<h3 class="hasAnchor">
<a href="#run-it-from-r" class="anchor"></a>Run it from R:</h3>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="co"># library(devtools)</span>

<span class="co"># if you are using locally:</span>
<span class="co"># devtools::install_local("~/Git/your-project-id")</span>
<span class="co"># devtools::load_all("~/Git/your-project-id")</span>
<span class="co"># OR if you pushed the project to github</span>
<span class="co"># install_github("your-github-name/your-project-id")</span>

<span class="co"># a basic smoke test</span>

<span class="co"># the JavaApi class is the entry point for R to your Java code.</span>
<span class="va">J</span> <span class="op">&lt;-</span> <span class="fu">testRapi</span><span class="fu">::</span><span class="va"><a href="../reference/JavaApi.html">JavaApi</a></span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></pre></div>
<pre><code>## [INFO] Scanning for projects...
## [INFO]                                                                         
## [INFO] ------------------------------------------------------------------------
## [INFO] Building R6 Generator Maven Plugin Test main-SNAPSHOT
## [INFO] ------------------------------------------------------------------------
## [INFO] 
## [INFO] --- maven-dependency-plugin:2.8:build-classpath (default-cli) @ r6-generator-docs ---
## [INFO] Skipped writing classpath file '/home/terminological/.cache/rmaven/io.github.terminological_r6-generator-docs_main-SNAPSHOT/classpath.txt'.  No changes found.
## [INFO] ------------------------------------------------------------------------
## [INFO] BUILD SUCCESS
## [INFO] ------------------------------------------------------------------------
## [INFO] Total time: 0.729 s
## [INFO] Finished at: 2022-09-24T01:21:01+01:00
## [INFO] Final Memory: 13M/44M
## [INFO] ------------------------------------------------------------------------</code></pre>
<pre><code>## 2022-09-24 01:21:01,820 INFO testRapi [main] Initialised testRapi</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="co"># all the API classes and methods are classes attached to the J java api object</span>
<span class="va">eg</span> <span class="op">=</span> <span class="va">J</span><span class="op">$</span><span class="va">MinimalExample</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">df</span> <span class="op">=</span> <span class="va">eg</span><span class="op">$</span><span class="fu">demo</span><span class="op">(</span>dataframe <span class="op">=</span> <span class="va">diamonds</span>, message <span class="op">=</span> <span class="st">"The diamonds dataframe"</span><span class="op">)</span></pre></div>
<pre><code>## 2022-09-24 01:21:01,885 INFO uk.co.terminological.rjava.test.MinimalExample [main] this dataframe has nrow=53940
## 2022-09-24 01:21:01,885 INFO uk.co.terminological.rjava.test.MinimalExample [main] The diamonds dataframe</code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></pre></div>
<pre><code>## [1] 53940</code></pre>
<p>For basic info about the plugin see: <a href="https://github.com/terminological/r6-generator" class="uri">https://github.com/terminological/r6-generator</a></p>
<p>For a more complete working example and further documentation see: <a href="https://github.com/terminological/r6-generator-docs" class="uri">https://github.com/terminological/r6-generator-docs</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Rob Challen, Rob Challen, terminological.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
