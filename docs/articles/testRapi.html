<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R6 Generator Maven Plugin: Getting started â€¢ testRapi</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="R6 Generator Maven Plugin: Getting started">
<meta property="og:description" content="testRapi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">testRapi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/testRapi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/R6-generator-datatypes.html">R6 Generator Maven Plugin: Datatype conversion</a>
    </li>
    <li>
      <a href="../articles/R6-generator-features.html">R6 Generator Maven Plugin: Key features</a>
    </li>
    <li>
      <a href="../articles/R6-generator-intro.html">R6 Generator Maven Plugin: Bridging Java and R6 for Package Development</a>
    </li>
    <li>
      <a href="../articles/R6-generator-maven-config.html">R6 Generator Maven Plugin: Metadata and Maven configuration</a>
    </li>
    <li>
      <a href="../articles/R6-generator-runtime.html">R6 Generator Runtime: Using R Datatypes in Java</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>R6 Generator Maven Plugin: Getting started</h1>
                        <h4 class="author">Rob Challen</h4>
            
            <h4 class="date">19/10/2020</h4>
      
      
      <div class="hidden name"><code>testRapi.Rmd</code></div>

    </div>

    
    
<p>Maven plugin and annotation processor to write glue code to allow correctly annotated java class to be used within R as an set of R6 classes.</p>
<div id="rationale" class="section level2">
<h2 class="hasAnchor">
<a href="#rationale" class="anchor"></a>Rationale</h2>
<p>R can use RJava or jsr223 to communicate with java. R has a class system called R6.</p>
<p>If you want to use a java library in R there is potentially a lot of glue code needed, and R library specific packaging configuration required.</p>
<p>However if you don't mind writing an R-centric API in Java you can generate all of this glue code using a few java annotations and the normal javadoc annotations. This plugin aims to provide an annotation processor that writes that glue code and creates a fairly transparent connection between java code and R code, with a minimum of hard work. The focus of this is streamlining the creation of R libraries by Java developers, rather than allowing access to arbitrary Java code from R.</p>
<p>The ultimate aim of this plugin to allow java developers to provide simple APIs for their libraries, package their library using maven, push it to github and for that to become seamlessly available as an R library, with a minimal amount of fuss.</p>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h2>
<div id="write-a-java-api" class="section level3">
<h3 class="hasAnchor">
<a href="#write-a-java-api" class="anchor"></a>Write a java api:</h3>
<div class="sourceCode"><pre class="sourceCode java"><code class="sourceCode java"><span class="kw">import org.slf4j.Logger;</span>
<span class="kw">import org.slf4j.LoggerFactory;</span>

<span class="kw">import uk.co.terminological.rjava.RClass;</span>
<span class="kw">import uk.co.terminological.rjava.RMethod;</span>
<span class="kw">import uk.co.terminological.rjava.types.RDataframe;</span>

<span class="co">/**</span>
<span class="co"> * This class is a very basic example of the features of the rJava maven plugin. &lt;br</span>&gt;
<span class="er"> * The class is annotated with an @RClass to identify it as part of the R API. &lt;br&gt;</span>
<span class="er"> */</span>
<span class="fu">@RClass</span>
<span class="er">public class MinimalExample {</span>

<span class="er">    static Logger log = LoggerFactory.getLogger(MinimalExample.class);</span>
<span class="er">    </span>
<span class="er">    @RMethod(examples = {</span>
<span class="er">        "minExample = J$MinimalExample$new()",</span>
<span class="er">        "minExample$demo(dataframe=tibble::tibble(input=c(1,2,3)), message='Hello world')"</span>
<span class="er">    })</span>
<span class="er">    /**</span>
<span class="er">     * Documentation of the method can be done in JavaDoc and these will be present in the R documentation </span>
<span class="er">     * @param dataframe - a dataframe with an arbitrary number of columns</span>
<span class="er">     * @param message - a message</span>
<span class="er">     * @return the dataframe unchanged</span>
<span class="er">     *  </span>
<span class="er">     */</span>
<span class="er">    public RDataframe demo(RDataframe dataframe, String message) {</span>
<span class="er">        log.info("this dataframe has nrow="+dataframe.nrow());</span>
<span class="er">        log.info(message);</span>
<span class="er">        return dataframe;</span>
<span class="er">    }</span>
<span class="er">    </span>
}</code></pre></div>
<p>Key points:</p>
<ul>
<li>You can annotate multiple classes with <span class="citation">@RClass</span>.</li>
<li>Only public methods annotated with <span class="citation">@RMethod</span> will feature in the R library</li>
<li>you cannot overload methods or constructors. Only one method with a given name is supported, and only one annotated constructor.</li>
<li>static and non static java methods are supported.</li>
<li>Objects that can be translated into R are returned by value</li>
<li>Other objects are passed around in R by reference as R6 Objects mirroring the layout of the java code.</li>
<li>Such objects can interact with each other in the same java api engine (see below)</li>
</ul>
</div>
<div id="package-it" class="section level3">
<h3 class="hasAnchor">
<a href="#package-it" class="anchor"></a>Package it:</h3>
<p>Required Maven runtime dependency</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml">    <span class="kw">&lt;properties&gt;</span>
        <span class="kw">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="kw">&lt;/project.build.sourceEncoding&gt;</span>
        <span class="kw">&lt;maven.compiler.source&gt;</span>1.8<span class="kw">&lt;/maven.compiler.source&gt;</span>
        <span class="kw">&lt;maven.compiler.target&gt;</span>1.8<span class="kw">&lt;/maven.compiler.target&gt;</span>
        <span class="kw">&lt;r6.version&gt;</span>main-SNAPSHOT<span class="kw">&lt;/r6.version&gt;</span>
    <span class="kw">&lt;/properties&gt;</span>

    <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span>
    <span class="kw">&lt;artifactId&gt;</span>r6-generator-docs<span class="kw">&lt;/artifactId&gt;</span>
    <span class="kw">&lt;version&gt;</span>main-SNAPSHOT<span class="kw">&lt;/version&gt;</span>
    <span class="kw">&lt;packaging&gt;</span>jar<span class="kw">&lt;/packaging&gt;</span>

    <span class="kw">&lt;name&gt;</span>R6 Generator Maven Plugin Test<span class="kw">&lt;/name&gt;</span>

    <span class="kw">&lt;dependencies&gt;</span>
        <span class="kw">&lt;dependency&gt;</span>
            <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span>
            <span class="kw">&lt;artifactId&gt;</span>r6-generator-runtime<span class="kw">&lt;/artifactId&gt;</span>
            <span class="kw">&lt;version&gt;</span>${r6.version}<span class="kw">&lt;/version&gt;</span>
        <span class="kw">&lt;/dependency&gt;</span>
...
    <span class="kw">&lt;/dependencies&gt;</span></code></pre></div>
<p>Repository configuration if you want to use the unstable <code>main-SNAPSHOT</code> version of the <code>r6-generator</code>.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml">    <span class="co">&lt;!-- Resolve runtime library on sonatype OSSRH --&gt;</span>
    <span class="co">&lt;!-- not needed if you plan to use a stable version of the r6-generator-runtime and r6-generator-maven-plugin  --&gt;</span>
    <span class="kw">&lt;repositories&gt;</span>
        <span class="kw">&lt;repository&gt;</span>
            <span class="kw">&lt;id&gt;</span>Sonatype OSSRH<span class="kw">&lt;/id&gt;</span>
            <span class="kw">&lt;url&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots/<span class="kw">&lt;/url&gt;</span>
        <span class="kw">&lt;/repository&gt;</span>
    <span class="kw">&lt;/repositories&gt;</span>

    <span class="co">&lt;!-- Resolve maven plugin on sonatype OSSRH --&gt;</span>
    <span class="kw">&lt;pluginRepositories&gt;</span>
        <span class="kw">&lt;pluginRepository&gt;</span>
            <span class="kw">&lt;id&gt;</span>Sonatype OSSRH<span class="kw">&lt;/id&gt;</span>
            <span class="kw">&lt;url&gt;</span>https://s01.oss.sonatype.org/content/repositories/snapshots/<span class="kw">&lt;/url&gt;</span>
        <span class="kw">&lt;/pluginRepository&gt;</span>
    <span class="kw">&lt;/pluginRepositories&gt;</span></code></pre></div>
<p>Maven plugin example configuration:</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml">    <span class="kw">&lt;build&gt;</span>
        <span class="kw">&lt;plugins&gt;</span>
...
            <span class="kw">&lt;plugin&gt;</span>
                <span class="kw">&lt;groupId&gt;</span>io.github.terminological<span class="kw">&lt;/groupId&gt;</span>
                <span class="kw">&lt;artifactId&gt;</span>r6-generator-maven-plugin<span class="kw">&lt;/artifactId&gt;</span>
                <span class="kw">&lt;version&gt;</span>${r6.version}<span class="kw">&lt;/version&gt;</span>
                <span class="kw">&lt;configuration&gt;</span>
                    <span class="kw">&lt;packageData&gt;</span>
                        <span class="kw">&lt;title&gt;</span>A test library<span class="kw">&lt;/title&gt;</span>
                        <span class="kw">&lt;version&gt;</span>0.2.0.9001<span class="kw">&lt;/version&gt;</span>
                        <span class="kw">&lt;url&gt;</span>https://terminological.github.io/r6-generator-docs/docs/<span class="kw">&lt;/url&gt;</span>
                        <span class="kw">&lt;doi&gt;</span>10.5281/zenodo.6645134<span class="kw">&lt;/doi&gt;</span>
                        <span class="kw">&lt;debug&gt;</span>false<span class="kw">&lt;/debug&gt;</span>
                        <span class="kw">&lt;usePkgdown&gt;</span>true<span class="kw">&lt;/usePkgdown&gt;</span>
                        <span class="kw">&lt;useRoxygen2&gt;</span>true<span class="kw">&lt;/useRoxygen2&gt;</span>
                        <span class="kw">&lt;useJavadoc&gt;</span>true<span class="kw">&lt;/useJavadoc&gt;</span>
                        <span class="kw">&lt;rjavaOpts&gt;</span>
                            <span class="kw">&lt;rjavaOpt&gt;</span>-Xmx256M<span class="kw">&lt;/rjavaOpt&gt;</span>
                        <span class="kw">&lt;/rjavaOpts&gt;</span>
                        <span class="kw">&lt;packageName&gt;</span>testRapi<span class="kw">&lt;/packageName&gt;</span>
                        <span class="kw">&lt;license&gt;</span>MIT<span class="kw">&lt;/license&gt;</span>
                        <span class="kw">&lt;description&gt;</span>
                            This package is a feature test of the R6 Generator Maven Plugin. It is not
                            intended to be useful beyond testing, demonstrating and documenting 
                            the features of the plugin.
                        <span class="kw">&lt;/description&gt;</span>
                        <span class="kw">&lt;maintainerName&gt;</span>Rob<span class="kw">&lt;/maintainerName&gt;</span>
                        <span class="kw">&lt;maintainerFamilyName&gt;</span>Challen<span class="kw">&lt;/maintainerFamilyName&gt;</span>
                        <span class="kw">&lt;maintainerEmail&gt;</span>rc538@exeter.ac.uk<span class="kw">&lt;/maintainerEmail&gt;</span>
                        <span class="kw">&lt;maintainerOrganisation&gt;</span>University of Exeter<span class="kw">&lt;/maintainerOrganisation&gt;</span>
                    <span class="kw">&lt;/packageData&gt;</span>
                    <span class="co">&lt;!-- the best place to put the R package is in the directory above the java code --&gt;</span>
                    <span class="co">&lt;!-- and to have the java code in a src subdirectory of a github repo. --&gt;</span>
                    <span class="co">&lt;!-- i.e. this file would be src/pom.xml. This makes R optimally happy. --&gt;</span>
                    <span class="kw">&lt;outputDirectory&gt;</span>${project.basedir}/..<span class="kw">&lt;/outputDirectory&gt;</span>
                <span class="kw">&lt;/configuration&gt;</span>
                <span class="kw">&lt;executions&gt;</span>
                    <span class="kw">&lt;execution&gt;</span>
                        <span class="kw">&lt;id&gt;</span>compile-java-library<span class="kw">&lt;/id&gt;</span>
                        <span class="kw">&lt;goals&gt;</span>
                            <span class="kw">&lt;goal&gt;</span>compile-java-library<span class="kw">&lt;/goal&gt;</span>
                        <span class="kw">&lt;/goals&gt;</span>
                    <span class="kw">&lt;/execution&gt;</span>
                    <span class="kw">&lt;execution&gt;</span>
                        <span class="kw">&lt;id&gt;</span>generate-r-library<span class="kw">&lt;/id&gt;</span>
                        <span class="kw">&lt;goals&gt;</span>
                            <span class="kw">&lt;goal&gt;</span>generate-r-library<span class="kw">&lt;/goal&gt;</span>
                        <span class="kw">&lt;/goals&gt;</span>
                    <span class="kw">&lt;/execution&gt;</span>
                <span class="kw">&lt;/executions&gt;</span>
            <span class="kw">&lt;/plugin&gt;</span>
        <span class="kw">&lt;/plugins&gt;</span>
    <span class="kw">&lt;/build&gt;</span></code></pre></div>
<p>And with this in place, a call to mvn package or mvn install will create your R library by adding files to your java source tree in the directory. Push your java source tree to github (Optional).</p>
</div>
<div id="run-it-from-r" class="section level3">
<h3 class="hasAnchor">
<a href="#run-it-from-r" class="anchor"></a>Run it from R:</h3>
<div class="sourceCode"><pre class="downlit">
<span class="co"># library(devtools)</span>

<span class="co"># if you are using locally:</span>
<span class="co"># devtools::install_local("~/Git/your-project-id")</span>
<span class="co"># devtools::load_all("~/Git/your-project-id")</span>
<span class="co"># OR if you pushed the project to github</span>
<span class="co"># install_github("your-github-name/your-project-id")</span>

<span class="co"># a basic smoke test</span>

<span class="co"># the JavaApi class is the entry point for R to your Java code.</span>
<span class="va">J</span> <span class="op">&lt;-</span> <span class="fu">testRapi</span><span class="fu">::</span><span class="va"><a href="../reference/JavaApi.html">JavaApi</a></span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="op">)</span></pre></div>
<pre><code>## Initialising A test library</code></pre>
<pre><code>## Version: 0.2.0.9001</code></pre>
<pre><code>## Generated: 2022-06-17T16:58:35.880693</code></pre>
<pre><code>## Adding to classpath: /tmp/RtmpIi1XjA/temp_libpath13da6a921ba8/testRapi/java/r6-generator-docs-main-SNAPSHOT-jar-with-dependencies.jar</code></pre>
<pre><code>## 2022-06-17 16:59:25,628 INFO testRapi [main] Initialised testRapi</code></pre>
<div class="sourceCode"><pre class="downlit">
<span class="co"># all the API classes and methods are classes attached to the J java api object</span>
<span class="va">eg</span> <span class="op">=</span> <span class="va">J</span><span class="op">$</span><span class="va">MinimalExample</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">df</span> <span class="op">=</span> <span class="va">eg</span><span class="op">$</span><span class="fu">demo</span><span class="op">(</span>dataframe <span class="op">=</span> <span class="va">diamonds</span>, message <span class="op">=</span> <span class="st">"The diamonds dataframe"</span><span class="op">)</span></pre></div>
<pre><code>## 2022-06-17 16:59:25,721 INFO uk.co.terminological.rjava.test.MinimalExample [main] this dataframe has nrow=53940
## 2022-06-17 16:59:25,721 INFO uk.co.terminological.rjava.test.MinimalExample [main] The diamonds dataframe</code></pre>
<div class="sourceCode"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></pre></div>
<pre><code>## [1] 53940</code></pre>
<p>For basic info about the plugin see: <a href="https://github.com/terminological/r6-generator" class="uri">https://github.com/terminological/r6-generator</a></p>
<p>For a more complete working example and further documentation see: <a href="https://github.com/terminological/r6-generator-docs" class="uri">https://github.com/terminological/r6-generator-docs</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Rob Challen, given family, terminological.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
